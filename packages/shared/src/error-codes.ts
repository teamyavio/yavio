/**
 * Stable error codes for the Yavio platform.
 *
 * Every code maps 1:1 to an entry in the error catalog (.specs/07_error-catalog.md).
 * Codes are grouped by service range and are never reused or reassigned.
 *
 * @example
 * throw new YavioError(ErrorCode.DB.PG_MIGRATION_FAILED, "Migration failed", 500);
 */
export const ErrorCode = {
  // ---------------------------------------------------------------------------
  // YAVIO-1000 – 1999: SDK (@yavio/sdk)
  // ---------------------------------------------------------------------------
  SDK: {
    // Configuration (1000–1099)
    NO_API_KEY: "YAVIO-1000",
    INVALID_API_KEY_FORMAT: "YAVIO-1001",
    INVALID_ENDPOINT_URL: "YAVIO-1002",
    CONFIG_LOADED: "YAVIO-1003",
    MALFORMED_CONFIG: "YAVIO-1004",
    UNSUPPORTED_CONFIG_VERSION: "YAVIO-1005",

    // Proxy & Instrumentation (1100–1199)
    PROXY_INTERCEPTION_FAILED: "YAVIO-1100",
    PLATFORM_DETECTION_FAILED: "YAVIO-1101",
    SESSION_ID_DERIVATION_FAILED: "YAVIO-1102",
    WIDGET_TOKEN_MINTING_FAILED: "YAVIO-1103",
    WIDGET_CONFIG_INJECTION_SKIPPED: "YAVIO-1104",
    CONTEXT_INJECTION_UNAVAILABLE: "YAVIO-1105",
    TOOL_RESPONSE_INSPECTION_FAILED: "YAVIO-1106",

    // Transport & Delivery (1200–1299)
    FLUSH_FAILED_RETRYING: "YAVIO-1200",
    FLUSH_FAILED_MAX_RETRIES: "YAVIO-1201",
    FLUSH_RATE_LIMITED: "YAVIO-1202",
    AUTH_REJECTED_PERMANENT: "YAVIO-1203",
    PARTIAL_BATCH_REJECTION: "YAVIO-1204",
    SHUTDOWN_FLUSH_FAILED: "YAVIO-1205",
    BUFFER_OVERFLOW: "YAVIO-1206",
    BEACON_DELIVERY_FAILED: "YAVIO-1207",

    // Validation & PII (1300–1399)
    EVENT_VALIDATION_FAILED: "YAVIO-1300",
    PII_STRIPPING_FAILED: "YAVIO-1301",
    IDENTIFY_USER_ID_CONFLICT: "YAVIO-1302",
    CONVERSION_MISSING_FIELDS: "YAVIO-1303",
    EVENT_PAYLOAD_TOO_LARGE: "YAVIO-1304",

    // Widget-Specific (1400–1499)
    NO_WIDGET_CONFIG: "YAVIO-1400",
    WIDGET_JWT_EXPIRED: "YAVIO-1401",
    WIDGET_TRACE_ID_MISMATCH: "YAVIO-1402",
  },

  // ---------------------------------------------------------------------------
  // YAVIO-2000 – 2999: Ingestion API (yavio-ingest)
  // ---------------------------------------------------------------------------
  INGEST: {
    // Authentication (2000–2099)
    MISSING_AUTH_HEADER: "YAVIO-2000",
    INVALID_API_KEY: "YAVIO-2001",
    API_KEY_EXPIRED: "YAVIO-2002",
    API_KEY_REVOKED: "YAVIO-2003",
    INVALID_WIDGET_JWT: "YAVIO-2004",
    WIDGET_JWT_EXPIRED: "YAVIO-2005",
    MALFORMED_BEARER_TOKEN: "YAVIO-2006",

    // Rate Limiting (2050–2099)
    API_KEY_RATE_LIMIT: "YAVIO-2050",
    API_KEY_BURST_LIMIT: "YAVIO-2051",
    IP_RATE_LIMIT: "YAVIO-2052",
    WIDGET_TOKEN_RATE_LIMIT: "YAVIO-2053",

    // Schema Validation (2100–2199)
    SCHEMA_VALIDATION_FAILED: "YAVIO-2100",
    MISSING_REQUIRED_FIELD: "YAVIO-2101",
    INVALID_EVENT_TYPE: "YAVIO-2102",
    INVALID_TIMESTAMP_FORMAT: "YAVIO-2103",
    EVENT_NAME_TOO_LONG: "YAVIO-2104",
    USER_ID_TOO_LONG: "YAVIO-2105",
    TRACE_ID_TOO_LONG: "YAVIO-2106",
    SESSION_ID_TOO_LONG: "YAVIO-2107",
    EVENT_TOO_LARGE: "YAVIO-2108",
    EMPTY_REQUEST_BODY: "YAVIO-2109",
    EMPTY_BATCH: "YAVIO-2110",
    BATCH_TOO_LARGE: "YAVIO-2111",
    WIDGET_TRACE_ID_MISMATCH: "YAVIO-2112",

    // Field Truncation (2200–2249)
    METADATA_TRUNCATED: "YAVIO-2200",
    USER_TRAITS_TRUNCATED: "YAVIO-2201",
    ERROR_MESSAGE_TRUNCATED: "YAVIO-2202",
    INPUT_KEYS_TRUNCATED: "YAVIO-2203",
    INPUT_TYPES_TRUNCATED: "YAVIO-2204",
    INTENT_SIGNALS_TRUNCATED: "YAVIO-2205",

    // PII Stripping (2250–2299)
    PII_STRIPPING_ENGINE_FAILED: "YAVIO-2250",
    PII_PATTERNS_REDACTED: "YAVIO-2251",

    // Widget Token Endpoint (2300–2349)
    MISSING_TRACE_ID: "YAVIO-2300",
    MISSING_SESSION_ID: "YAVIO-2301",
    WIDGET_TOKEN_UNAUTHORIZED: "YAVIO-2302",
    WIDGET_TOKEN_RATE_LIMITED: "YAVIO-2303",

    // Storage & Pipeline (2400–2499)
    CLICKHOUSE_WRITE_RETRYING: "YAVIO-2400",
    CLICKHOUSE_WRITE_MAX_RETRIES: "YAVIO-2401",
    BACKPRESSURE_ACTIVE: "YAVIO-2402",
    POSTGRESQL_UNAVAILABLE: "YAVIO-2403",
    API_KEY_CACHE_MISS: "YAVIO-2404",

    // Catch-All
    INTERNAL_ERROR: "YAVIO-2999",
  },

  // ---------------------------------------------------------------------------
  // YAVIO-3000 – 3999: Dashboard (yavio-dashboard)
  // ---------------------------------------------------------------------------
  DASHBOARD: {
    // Authentication (3000–3099)
    SESSION_EXPIRED: "YAVIO-3000",
    INVALID_CREDENTIALS: "YAVIO-3001",
    EMAIL_NOT_VERIFIED: "YAVIO-3002",
    ACCOUNT_LOCKED_BRUTE_FORCE: "YAVIO-3003",
    ACCOUNT_LOCKED_ESCALATED: "YAVIO-3004",
    ACCOUNT_LOCKED_CAPTCHA: "YAVIO-3005",
    INVALID_PASSWORD_RESET_TOKEN: "YAVIO-3006",
    INVALID_EMAIL_VERIFICATION_TOKEN: "YAVIO-3007",
    INVALID_INVITE_TOKEN: "YAVIO-3008",
    OAUTH_ERROR: "YAVIO-3009",
    CSRF_VALIDATION_FAILED: "YAVIO-3010",
    ORIGIN_VALIDATION_FAILED: "YAVIO-3011",

    // Request Validation (3050–3099)
    VALIDATION_FAILED: "YAVIO-3050",

    // Authorization (3100–3149)
    INSUFFICIENT_ROLE: "YAVIO-3100",
    OWNER_CANNOT_BE_REMOVED: "YAVIO-3101",
    NOT_A_MEMBER: "YAVIO-3102",
    VIEWER_EXPORT_DENIED: "YAVIO-3103",

    // Workspace & Project Management (3150–3249)
    WORKSPACE_SLUG_EXISTS: "YAVIO-3150",
    WORKSPACE_NOT_FOUND: "YAVIO-3151",
    PROJECT_SLUG_EXISTS: "YAVIO-3152",
    PROJECT_NOT_FOUND: "YAVIO-3153",
    INVALID_WORKSPACE_NAME: "YAVIO-3154",
    INVALID_PROJECT_NAME: "YAVIO-3155",
    INVALID_SLUG_FORMAT: "YAVIO-3156",

    // API Key Management (3250–3299)
    API_KEY_NOT_FOUND: "YAVIO-3250",
    API_KEY_ALREADY_REVOKED: "YAVIO-3251",
    INVALID_KEY_NAME: "YAVIO-3252",
    INVALID_GRACE_PERIOD: "YAVIO-3253",

    // Member & Invitation Management (3300–3349)
    MEMBER_NOT_FOUND: "YAVIO-3300",
    USER_ALREADY_MEMBER: "YAVIO-3301",
    INVITATION_ALREADY_PENDING: "YAVIO-3302",
    INVALID_ROLE: "YAVIO-3303",
    INVITATION_NOT_FOUND: "YAVIO-3304",

    // Analytics Queries (3400–3499)
    INVALID_TIME_RANGE: "YAVIO-3400",
    INVALID_GRANULARITY: "YAVIO-3401",
    INVALID_PLATFORM_FILTER: "YAVIO-3402",
    INVALID_PAGINATION: "YAVIO-3403",
    INVALID_SORT_PARAMETER: "YAVIO-3404",
    ANALYTICS_QUERY_TIMEOUT: "YAVIO-3405",
    CLICKHOUSE_UNAVAILABLE: "YAVIO-3406",

    // Live Feed (3500–3549)
    SSE_CONNECTION_LIMIT: "YAVIO-3500",
    LIVE_FEED_UNAVAILABLE: "YAVIO-3501",

    // Billing (3600–3699)
    BILLING_NOT_AVAILABLE: "YAVIO-3600",
    INVALID_SPENDING_CAP: "YAVIO-3601",
    STRIPE_CHECKOUT_FAILED: "YAVIO-3602",
    STRIPE_WEBHOOK_SIGNATURE_INVALID: "YAVIO-3603",
    PAYMENT_PAST_DUE: "YAVIO-3604",
    NO_ACTIVE_SUBSCRIPTION: "YAVIO-3605",
    TIER_LIMIT_EXCEEDED: "YAVIO-3606",

    // Account Management (3700–3749)
    ACCOUNT_DELETION_REQUIRES_PASSWORD: "YAVIO-3700",
    INVALID_PASSWORD: "YAVIO-3701",
    EMAIL_ALREADY_REGISTERED: "YAVIO-3702",
    PASSWORD_TOO_WEAK: "YAVIO-3703",

    // Rate Limiting (3800–3849)
    AUTH_ROUTE_RATE_LIMITED: "YAVIO-3800",
    ANALYTICS_QUERY_RATE_LIMITED: "YAVIO-3801",
    MANAGEMENT_ROUTE_RATE_LIMITED: "YAVIO-3802",
    BILLING_ROUTE_RATE_LIMITED: "YAVIO-3803",

    // Catch-All
    INTERNAL_ERROR: "YAVIO-3999",
  },

  // ---------------------------------------------------------------------------
  // YAVIO-4000 – 4999: Intelligence Service (yavio-intelligence)
  // ---------------------------------------------------------------------------
  INTELLIGENCE: {
    // Authentication & Licensing (4000–4099)
    INVALID_LICENSE: "YAVIO-4000",
    LICENSE_TIER_INSUFFICIENT: "YAVIO-4001",
    LICENSE_VALIDATION_UNAVAILABLE: "YAVIO-4002",
    UNAUTHORIZED_REQUEST: "YAVIO-4003",

    // Clustering (4100–4149)
    NO_CLUSTERING_RESULTS: "YAVIO-4100",
    CLUSTERING_JOB_FAILED: "YAVIO-4101",
    CLUSTERING_DATA_READ_FAILED: "YAVIO-4102",
    CLUSTERING_RESULTS_WRITE_FAILED: "YAVIO-4103",

    // LLM & Insights (4200–4299)
    LLM_API_CALL_FAILED: "YAVIO-4200",
    LLM_API_TIMEOUT: "YAVIO-4201",
    LLM_API_RATE_LIMITED: "YAVIO-4202",
    INTENT_CLASSIFICATION_FAILED: "YAVIO-4203",
    INSIGHT_GENERATION_FAILED: "YAVIO-4204",
    DIGEST_GENERATION_FAILED: "YAVIO-4205",
    DIGEST_EMAIL_DELIVERY_FAILED: "YAVIO-4206",

    // Anomaly Detection (4300–4349)
    NO_ANOMALIES_FOUND: "YAVIO-4300",
    ANOMALY_DETECTION_FAILED: "YAVIO-4301",
    ANOMALY_ALERT_DISPATCH_FAILED: "YAVIO-4302",

    // Benchmarking & A/B Testing (4400–4449)
    NO_BENCHMARK_DATA: "YAVIO-4400",
    AB_TEST_NOT_FOUND: "YAVIO-4401",
    INVALID_AB_TEST_CONFIG: "YAVIO-4402",
    AB_TEST_ALREADY_EXISTS: "YAVIO-4403",

    // Background Jobs (4500–4549)
    SCHEDULED_JOB_FAILED: "YAVIO-4500",
    JOB_SKIPPED_STILL_RUNNING: "YAVIO-4501",
    JOB_EXCEEDED_TIMEOUT: "YAVIO-4502",

    // Catch-All
    INTERNAL_ERROR: "YAVIO-4999",
  },

  // ---------------------------------------------------------------------------
  // YAVIO-5000 – 5999: Database / Storage
  // ---------------------------------------------------------------------------
  DB: {
    // ClickHouse (5000–5199)
    CH_CONNECTION_REFUSED: "YAVIO-5000",
    CH_QUERY_TIMEOUT: "YAVIO-5001",
    CH_INSERT_FAILED: "YAVIO-5002",
    CH_SCHEMA_MISMATCH: "YAVIO-5003",
    CH_DISK_USAGE_HIGH: "YAVIO-5004",
    CH_MERGE_FAILED: "YAVIO-5005",
    CH_ROW_POLICY_VIOLATION: "YAVIO-5006",
    CH_MIGRATION_FAILED: "YAVIO-5007",

    // PostgreSQL (5200–5399)
    PG_CONNECTION_REFUSED: "YAVIO-5200",
    PG_QUERY_FAILED: "YAVIO-5201",
    PG_UNIQUE_CONSTRAINT_VIOLATION: "YAVIO-5202",
    PG_FOREIGN_KEY_VIOLATION: "YAVIO-5203",
    PG_RLS_POLICY_VIOLATION: "YAVIO-5204",
    PG_MIGRATION_FAILED: "YAVIO-5205",
    PG_CONNECTION_POOL_EXHAUSTED: "YAVIO-5206",
    PG_DEADLOCK_DETECTED: "YAVIO-5207",
    PG_DISK_USAGE_HIGH: "YAVIO-5208",
  },

  // ---------------------------------------------------------------------------
  // YAVIO-6000 – 6999: CLI (@yavio/cli)
  // ---------------------------------------------------------------------------
  CLI: {
    // Environment (6000–6099)
    DOCKER_NOT_FOUND: "YAVIO-6000",
    DOCKER_COMPOSE_NOT_FOUND: "YAVIO-6001",
    NODE_VERSION_UNSUPPORTED: "YAVIO-6002",
    DOCKER_VERSION_UNSUPPORTED: "YAVIO-6003",
    DOCKER_COMPOSE_VERSION_UNSUPPORTED: "YAVIO-6004",
    INSUFFICIENT_MEMORY: "YAVIO-6005",
    INSUFFICIENT_DISK_SPACE: "YAVIO-6006",

    // Configuration (6100–6149)
    CONFIG_NOT_FOUND: "YAVIO-6100",
    INVALID_CONFIG: "YAVIO-6101",
    COMPOSE_FILE_NOT_FOUND: "YAVIO-6102",
    INVALID_API_KEY: "YAVIO-6103",

    // Connectivity (6200–6249)
    INGESTION_API_UNREACHABLE: "YAVIO-6200",
    DASHBOARD_UNREACHABLE: "YAVIO-6201",
    CLICKHOUSE_UNREACHABLE: "YAVIO-6202",
    POSTGRESQL_UNREACHABLE: "YAVIO-6203",
    DNS_RESOLUTION_FAILED: "YAVIO-6204",

    // Port Conflicts (6300–6349)
    PORT_3000_IN_USE: "YAVIO-6300",
    PORT_3001_IN_USE: "YAVIO-6301",
    PORT_5432_IN_USE: "YAVIO-6302",
    PORT_8123_IN_USE: "YAVIO-6303",
    PORT_9000_IN_USE: "YAVIO-6304",

    // Command Errors (6400–6499)
    COMPOSE_UP_FAILED: "YAVIO-6400",
    COMPOSE_DOWN_FAILED: "YAVIO-6401",
    IMAGE_PULL_FAILED: "YAVIO-6402",
    RESET_CONFIRMATION_MISMATCH: "YAVIO-6403",
    SERVICE_NOT_RECOGNIZED: "YAVIO-6404",

    // Catch-All
    INTERNAL_ERROR: "YAVIO-6999",
  },

  // ---------------------------------------------------------------------------
  // YAVIO-7000 – 7999: Infrastructure / Cross-Service
  // ---------------------------------------------------------------------------
  INFRA: {
    // Health Checks (7000–7099)
    HEALTH_CHECK_FAILED: "YAVIO-7000",
    HEALTH_CHECK_DEGRADED: "YAVIO-7001",
    HEALTH_CHECK_TIMEOUT: "YAVIO-7002",

    // Observability (7100–7149)
    SENTRY_INIT_FAILED: "YAVIO-7100",
    OTEL_EXPORTER_FAILED: "YAVIO-7101",
    METRICS_AUTH_FAILED: "YAVIO-7102",
    SENTRY_SEND_FAILED: "YAVIO-7103",
    LOG_LEVEL_INVALID: "YAVIO-7104",

    // Deployment & Docker (7200–7249)
    REQUIRED_ENV_VAR_MISSING: "YAVIO-7200",
    INVALID_ENV_VAR: "YAVIO-7201",
    CONTAINER_OOM_KILLED: "YAVIO-7202",
    VOLUME_MOUNT_FAILED: "YAVIO-7203",

    // TLS & Security (7300–7349)
    TLS_CERT_EXPIRING_SOON: "YAVIO-7300",
    TLS_CERT_EXPIRED: "YAVIO-7301",
    INSECURE_CONFIGURATION: "YAVIO-7302",

    // CORS (7400–7449)
    CORS_ORIGIN_NOT_ALLOWED: "YAVIO-7400",
    CORS_METHOD_NOT_ALLOWED: "YAVIO-7401",

    // Catch-All
    INTERNAL_ERROR: "YAVIO-7999",
  },
} as const;

/** Union of all possible error code string values. */
type ErrorCodeGroups = typeof ErrorCode;
export type ErrorCodeValue = {
  [G in keyof ErrorCodeGroups]: ErrorCodeGroups[G][keyof ErrorCodeGroups[G]];
}[keyof ErrorCodeGroups];
